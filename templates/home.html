{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="row mb-4 mt-5">
        <div class="col-md-12 text-center">
            <h3>Start chatting with friends or create a new room!</h3>
            <a href="/create_room" class="btn btn-primary">Create a Room</a>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-4 mb-4">
            {% for room in rooms %}
            <div class="card mb-3 room-cards">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <h5 class="card-title">{{ room.room_name }}</h5>
                    <!-- <a href="/rooms/{{ room._id.room_id }}" class="btn btn-primary">Join Room</a> -->
                    <button class="btn btn-primary join-room-btn" onclick="loadRoom(this, '{{ room._id.room_id }}')">Join Room</button>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="col-md-8">
            <iframe id="roomIframe" width="100%" height="750px" frameborder="0"></iframe>
        </div>
    </div>
</div>
<script>
    function loadRoom(button, roomId) {
        const buttons = document.querySelectorAll('.join-room-btn');
        buttons.forEach(btn => {
            if (btn !== button) {
                btn.innerText = 'Join Room';
            }
        });

        // Raise an alert
        // Change the clicked button text to 'Room Joined'
        button.innerText = 'Room Joined';        const iframe = document.getElementById('roomIframe');
        iframe.src = `/rooms/${roomId}`;
    }
</script>

{% endblock %}